<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

<link rel="stylesheet" type="text/css" href="main.css">



</head>
<body>
    <div class="container">

<h1>Social Net</h1>

<div class="col-12">      
  <h4>Debug Start</h4>
  <label for="name" class="col-lg-2 control-label">SOCIAL CONTRACT</label>
  <input id="score">
  <button id="startNET">Debug SocialNet Start</button>
</div>
<h2 id="instructor">User</h2>

<div class="row">
    <div class="column column-33">

      

<div class="col-12"> 
  
  <label>From Account</label>
  <select id="bidAccount" onclick="tocopy()"> </select>
  <input id="bidacc" readonly>

</div>

<div class="col-12">
  
  <label for="name" class="col-lg-2 control-label">Add Friend</label>
  <input id="Friend" type="text">

<button id="buttonFriend">Add</button>

</div>

<div class="col-12">
  <label for="name" class="col-lg-2 control-label"> Name</label>
  <input id="name" type="text">

<label for="name" class="col-lg-2 control-label">Password</label>
  <input id="ipfshash" type="password">

<button id="buttonUser">Create My User</button>

</div>



<div class="col-12">
    <label for="name" class="col-lg-2 control-label">Create message</label>
    <input id="publisher" type="text">
    <label for="name" class="col-lg-2 control-label">Ether Ammount</label>
    <input id="publisherEth" type="text">
<button id="buttonPublish">Publish</button>

  
</div>


<label for="name" class="col-lg-2 control-label">Influence</label>
        
        <input id="Influenceid" type="text">
<button id="buttonInfluence">Influence</button>



<label for="name" class="col-lg-2 control-label">Watch Updates</label>
<button id="buttonUpdate">Update</button>



</div>
<script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>
<script> 
</script>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script>
  var el = function(id){ return document.querySelector(id); };
    {{!-- if (typeof web3 !== 'undefined') --}}
    if (false)
          {
              web3 = new Web3(web3.currentProvider);
          } else {
              // set the provider you want from Web3.providers
              web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));   

          }
    
    web3.eth.defaultAccount = web3.eth.accounts[0];
    accounts =  web3.eth.accounts;
    accounts.forEach(function(address){
          bidAccount.innerHTML += '<option value="' + address + '">'
            + address + '</option>';
    });

    function tocopy(){$('#bidacc').val($('#bidAccount').val()); }


var SocialContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"OwnerIs","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"useradd","type":"address"}],"name":"getUserContract","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getlenPublishUser","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"useradd","type":"address"},{"name":"publishadd","type":"address"}],"name":"CreatePublish","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"Users","outputs":[{"name":"Useradd","type":"address"},{"name":"counter","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"useradd","type":"address"}],"name":"getUsercount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"index","type":"uint256"}],"name":"getPublishUser","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"debug_gas_sc","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"sc_owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"user","type":"address"},{"name":"contractuser","type":"address"}],"name":"CreateUser","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"addressf","type":"address"}],"name":"AddFriendsS","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":true,"stateMutability":"payable","type":"constructor"}]);
  var socialcore;

  $("#startNET").on('click', function (){
   socialcore = SocialContract.new(
    {
      from: $('#bidAccount').val(), 
      data: '0x6080604052336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505a6001819055506109768061005a6000396000f3006080604052600436106100af576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680631073776f146100b45780637e6c75f21461010b5780637ef3401b1461018e5780639093a9fd146101b957806399b956a01461021c5780639bb1c399146102a65780639c73d129146102fd578063e02469f61461036a578063e18efa2814610395578063e8611f1b146103ec578063ea9624e91461044f575b600080fd5b3480156100c057600080fd5b506100c9610492565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561011757600080fd5b5061014c600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506104bb565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561019a57600080fd5b506101a3610527565b6040518082815260200191505060405180910390f35b3480156101c557600080fd5b5061021a600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610574565b005b34801561022857600080fd5b5061025d600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061061e565b604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390f35b3480156102b257600080fd5b506102e7600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610662565b6040518082815260200191505060405180910390f35b34801561030957600080fd5b50610328600480360381019080803590602001909291905050506106ae565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561037657600080fd5b5061037f610731565b6040518082815260200191505060405180910390f35b3480156103a157600080fd5b506103aa610737565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156103f857600080fd5b5061044d600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061075c565b005b34801561045b57600080fd5b50610490600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506107e1565b005b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6000600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b6000600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010180549050905090565b600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206001018190806001815401808255809150509060018203906000526020600020016000909192909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505050565b60026020528060005260406000206000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060020154905082565b6000600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600201549050919050565b6000600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600101828154811015156106ff57fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b60015481565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b80600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050565b600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16636a2c0360826040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050600060405180830381600087803b1580156108de57600080fd5b505af11580156108f2573d6000803e3d6000fd5b505050506001600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160008282540192505081905550505600a165627a7a723058209c5eb2f793acf0a4e91ef4881ae23ce1dd8fdf434624a8d28db7203ca426ad2b0029', 
      gas: '4700000'
    }, function (e, contract){
      console.log(e, contract);
      if (typeof contract.address !== 'undefined') {
          $('#score').val(contract.address);
          console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
      }
  });
  });
  {{!-- var SocialContract = SocialContract.at('0x2b2cf035dab92b90092bcb903fa6ec4109b4d294'); --}}


  $("#buttonFriend").on('click' ,function() {

      socialcore.AddFriendsS.sendTransaction($("#Friend").val(),{
            from: $('#bidacc').val(),
            gas:4000000},function (error, result){ 
                if(!error){
                    console.log(result);
                } else{
                    console.log(error);
                }
        });
              
          });
  
  
  </script>
<script>
  var name1 = $("#name").val();
var ipfs_hash1 = $("#ipfshash").val() ;
var Score = $("#score").val() ;
var userContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"index","type":"uint256"}],"name":"getUserFriends","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"addressf","type":"address"}],"name":"AddFriends","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"Friends","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"ishere","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"name1","type":"string"},{"name":"ipfs_hash1","type":"string"},{"name":"Score","type":"address"}],"payable":true,"stateMutability":"payable","type":"constructor"}]);

 $("#buttonUser").on('click' ,function() {
              var user = userContract.new(
                name1,
                ipfs_hash1,
                socialcore.address,
              {
                from: $('#bidacc').val(), 
                data: '0x608060405260405161070538038061070583398101806040528101908080518201929190602001805182019291906020018051906020019092919050505033600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555082600190805190602001906100949291906101b5565b5081600290805190602001906100ab9291906101b5565b5060016000806101000a81548160ff0219169083151502179055508073ffffffffffffffffffffffffffffffffffffffff1663e8611f1b33306040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b15801561019557600080fd5b505af11580156101a9573d6000803e3d6000fd5b5050505050505061025a565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106101f657805160ff1916838001178555610224565b82800160010185558215610224579182015b82811115610223578251825591602001919060010190610208565b5b5090506102319190610235565b5090565b61025791905b8082111561025357600081600090555060010161023b565b5090565b90565b61049c806102696000396000f300608060405260043610610078576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde031461007d5780630a018df01461010d5780636a2c03601461017a5780638a1a8bbf146101bd5780638da5cb5b1461022a578063a050bdd614610281575b600080fd5b34801561008957600080fd5b506100926102b0565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156100d25780820151818401526020810190506100b7565b50505050905090810190601f1680156100ff5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561011957600080fd5b506101386004803603810190808035906020019092919050505061034e565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561018657600080fd5b506101bb600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610391565b005b3480156101c957600080fd5b506101e8600480360381019080803590602001909291905050506103fa565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561023657600080fd5b5061023f610438565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561028d57600080fd5b5061029661045e565b604051808215151515815260200191505060405180910390f35b60018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156103465780601f1061031b57610100808354040283529160200191610346565b820191906000526020600020905b81548152906001019060200180831161032957829003601f168201915b505050505081565b600060048281548110151561035f57fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b60048190806001815401808255809150509060018203906000526020600020016000909192909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050565b60048181548110151561040957fe5b906000526020600020016000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900460ff16815600a165627a7a72305820634917e02a09ca72d9d2ec88f594dcd866eef7c499fc12602c95925ba6012a220029', 
                gas: '4700000'
              }, function (e, contract){
                console.log(e, contract);
                if (typeof contract.address !== 'undefined') {
                  console.log(socialcore.address);
                    console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
                }
            })
            
        });
</script>
<script>


</script>

<script>
var publishContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"shares","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"shareEvent","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getBNS","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"UserCollect","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"get_min_inf","outputs":[{"name":"","type":"uint256[2]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"gas_ammount_to_stop","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getIPFS","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"Influencers","outputs":[{"name":"top5","type":"bool"},{"name":"shared","type":"bool"},{"name":"followers","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"Pammount_","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"BNS","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"Finish","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"collected","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"AuthorStopCollect","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"gas_ammount_to_end","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"EffortPayment","outputs":[{"name":"","type":"uint256[2]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"debug_gas","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"finished","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"ammount_","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"ipfs_content1","type":"string"},{"name":"socialcore","type":"address"}],"payable":true,"stateMutability":"payable","type":"constructor"}]);
  $("#buttonPublish").on('click' ,function() {
    var ipfs_content1 = 'asdasdasd' ;
   
    var publish = publishContract.new(
      ipfs_content1,
      $('#score').val(),
      {
        from: $('#bidacc').val(), 
        data: '0x608060405260405162001b6338038062001b63833981018060405281019080805182019291906020018051906020019092919050505080600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16631073776f6040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015620000fd57600080fd5b505af115801562000112573d6000803e3d6000fd5b505050506040513d60208110156200012957600080fd5b8101908080519060200190929190505050600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555033600b60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555034600a819055505a600f819055508160029080519060200190620001e19291906200035c565b506000600760006101000a81548160ff0219169083151502179055506000600d8190555060006005819055506000600681905550600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639093a9fd600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16306040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b1580156200032957600080fd5b505af11580156200033e573d6000803e3d6000fd5b505050506002600c81620003539190620003e3565b5050506200043a565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200039f57805160ff1916838001178555620003d0565b82800160010185558215620003d0579182015b82811115620003cf578251825591602001919060010190620003b2565b5b509050620003df919062000412565b5090565b8154818355818111156200040d578183600052602060002091820191016200040c919062000412565b5b505050565b6200043791905b808211156200043357600081600090555060010162000419565b5090565b90565b611719806200044a6000396000f300608060405260043610610107576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806303314efa1461010c5780630a550245146101375780631a9737af1461014e5780631fe763831461017957806320d200f5146101905780632b333acd146101e35780634efe2d1e1461020e578063540a3e271461029e5780636c5eff261461030b57806370ff726b1461034c57806374a82f69146103b957806384bcefd4146103d057806385eeb275146103fb5780638d6d27b3146104125780638da5cb5b1461043d578063a8fb07c314610494578063b857c5b9146104e7578063bef4876b14610512578063c6f5c4f614610541575b600080fd5b34801561011857600080fd5b5061012161056c565b6040518082815260200191505060405180910390f35b34801561014357600080fd5b5061014c610572565b005b34801561015a57600080fd5b50610163610a74565b6040518082815260200191505060405180910390f35b34801561018557600080fd5b5061018e610a81565b005b34801561019c57600080fd5b506101a5610ca7565b6040518082600260200280838360005b838110156101d05780820151818401526020810190506101b5565b5050505090500191505060405180910390f35b3480156101ef57600080fd5b506101f86111d3565b6040518082815260200191505060405180910390f35b34801561021a57600080fd5b506102236111d9565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610263578082015181840152602081019050610248565b50505050905090810190601f1680156102905780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156102aa57600080fd5b506102df600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061127b565b604051808415151515815260200183151515158152602001828152602001935050505060405180910390f35b34801561031757600080fd5b50610336600480360381019080803590602001909291905050506112bf565b6040518082815260200191505060405180910390f35b34801561035857600080fd5b50610377600480360381019080803590602001909291905050506112d9565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156103c557600080fd5b506103ce611317565b005b3480156103dc57600080fd5b506103e561134d565b6040518082815260200191505060405180910390f35b34801561040757600080fd5b50610410611353565b005b34801561041e57600080fd5b5061042761153b565b6040518082815260200191505060405180910390f35b34801561044957600080fd5b50610452611541565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156104a057600080fd5b506104a9611567565b6040518082600260200280838360005b838110156104d45780820151818401526020810190506104b9565b5050505090500191505060405180910390f35b3480156104f357600080fd5b506104fc6115f9565b6040518082815260200191505060405180910390f35b34801561051e57600080fd5b506105276115ff565b604051808215151515815260200191505060405180910390f35b34801561054d57600080fd5b50610556611612565b6040518082815260200191505060405180910390f35b60005481565b61057a611666565b60011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160019054906101000a900460ff161515141515156105dd57600080fd5b60018060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160016101000a81548160ff02191690831515021790555060016000808282540192505081905550600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639093a9fd33306040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b15801561073857600080fd5b505af115801561074c573d6000803e3d6000fd5b50505050610758610ca7565b905080600060028110151561076957fe5b6020020151600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639bb1c399336040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15801561082b57600080fd5b505af115801561083f573d6000803e3d6000fd5b505050506040513d602081101561085557600080fd5b810190808051906020019092919050505011806108ea5750600073ffffffffffffffffffffffffffffffffffffffff16600c82600160028110151561089657fe5b60200201518154811015156108a757fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16145b15610a5c57600060016000600c84600160028110151561090657fe5b602002015181548110151561091757fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160006101000a81548160ff02191690831515021790555033600c8260016002811015156109a857fe5b60200201518154811015156109b957fe5b9060005260206000200160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060018060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160006101000a81548160ff0219169083151502179055505b6002600054101515610a7157610a70611317565b5b50565b6000600c80549050905090565b6001600760006101000a81548160ff02191690831515021790551515610aa657600080fd5b3373ffffffffffffffffffffffffffffffffffffffff16600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610b8c57600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc60086001600281101515610b4857fe5b01549081150290604051600060405180830381858888f19350505050158015610b75573d6000803e3d6000fd5b506001600d60008282540192505081905550610c58565b60011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160009054906101000a900460ff161515141515610bee57600080fd5b3373ffffffffffffffffffffffffffffffffffffffff166108fc60086000600281101515610c1857fe5b01549081150290604051600060405180830381858888f19350505050158015610c45573d6000803e3d6000fd5b506001600d600082825401925050819055505b6001600c8054905001600d541415610ca557600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b565b610caf611666565b600080610cba611666565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639bb1c399600c6000815481101515610d0a57fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b158015610db357600080fd5b505af1158015610dc7573d6000803e3d6000fd5b505050506040513d6020811015610ddd57600080fd5b81019080805190602001909291905050509350600090505b600c8054905081101561119657600073ffffffffffffffffffffffffffffffffffffffff16600c82815481101515610e2957fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610eaa5783826000600281101515610e8057fe5b60200201818152505080826001600281101515610e9957fe5b6020020181815250508194506111cc565b83600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639bb1c399600c84815481101515610ef857fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b158015610fa157600080fd5b505af1158015610fb5573d6000803e3d6000fd5b505050506040513d6020811015610fcb57600080fd5b8101908080519060200190929190505050108061104d5750600073ffffffffffffffffffffffffffffffffffffffff16600c8281548110151561100a57fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16145b1561118957600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639bb1c399600c8381548110151561109f57fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15801561114857600080fd5b505af115801561115c573d6000803e3d6000fd5b505050506040513d602081101561117257600080fd5b810190808051906020019092919050505093508092505b8080600101915050610df5565b838260006002811015156111a657fe5b602002018181525050828260016002811015156111bf57fe5b6020020181815250508194505b5050505090565b60055481565b606060028054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156112715780601f1061124657610100808354040283529160200191611271565b820191906000526020600020905b81548152906001019060200180831161125457829003601f168201915b5050505050905090565b60016020528060005260406000206000915090508060000160009054906101000a900460ff16908060000160019054906101000a900460ff16908060010154905083565b6008816002811015156112ce57fe5b016000915090505481565b600c818154811015156112e857fe5b906000526020600020016000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6001600760006101000a81548160ff02191690831515021790555061133a611567565b600890600261134a929190611688565b50565b600d5481565b61135b611666565b6000600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156113b957600080fd5b6113c1611567565b91506000600c80549050111561148457600190505b600c8054905081101561148357600c818154811015156113f257fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc83600060028110151561144557fe5b60200201519081150290604051600060405180830381858888f19350505050158015611475573d6000803e3d6000fd5b5080806001019150506113d6565b5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc8360016002811015156114cf57fe5b60200201519081150290604051600060405180830381858888f193505050501580156114ff573d6000803e3d6000fd5b50600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b60065481565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b61156f611666565b611577611666565b61159c61159161158a604b600a54611618565b6064611650565b600c80549050611650565b8160006002811015156115ab57fe5b6020020181815250506115d6600c805490508260006002811015156115cc57fe5b6020020151611618565b600a54038160016002811015156115e957fe5b6020020181815250508091505090565b600f5481565b600760009054906101000a900460ff1681565b600a5481565b60008083141561162b576000905061164a565b818302905081838281151561163c57fe5b0414151561164657fe5b8090505b92915050565b6000818381151561165d57fe5b04905092915050565b6040805190810160405280600290602082028038833980820191505090505090565b82600281019282156116b7579160200282015b828111156116b657825182559160200191906001019061169b565b5b5090506116c491906116c8565b5090565b6116ea91905b808211156116e65760008160009055506001016116ce565b5090565b905600a165627a7a723058200e731fb1546e777c667f5dfdbfd536d60103ac03494fe2a27c755fcfffd7a9400029', 
        gas: '4700000',
        value: web3.toWei($('#publisherEth').val(), 'ether')
      }, function (e, contract){
        console.log(e, contract);
        if (typeof contract.address !== 'undefined') {
          $('#Influenceid').val(contract.address);
            console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
        }
    })
        });


  $('#buttonInfluence').on('click', function (){
      published=publishContract.at($('#Influenceid').val())
      published.shareEvent.sendTransaction({
            from: $('#bidacc').val(),
            gas:4000000},function (error, result){ 
                if(!error){
                    console.log(result);
                } else{
                    console.log(error);
                }
        });
  });

var Friends=[];

  $('#buttonUpdate').on('click', function (){

 Friends=[];
          socialcore.getUsercount.call($('#bidacc').val(),
            function (error1, result1){ 
              
                if(!error1){
                  socialcore.getUserContract.call($('#bidacc').val(),function (error2, result2){ 
                        if(!error2){
                          
                          for (i=0;i<result1.c[0];i++){
                              console.log(result2);
                              userContract.at(result2).getUserFriends.call(i,function (error3,result3){
                                  if(!error3){
                                    Friends.push(result3);
                                    console.log(Friends);
                                  }
                                  else{
                                    console.log(error3);
                                  }

                              });

                          }
                            {{!-- console.log(result2); --}}
                        } else{
                            {{!-- console.log(error2); --}}
                        }
                        });
                          
                            console.log(result1);
                } else{

                    console.log(error1);
                }
      });
      {{!-- socialcore.getUsercount.sendTransaction($('#bidacc').val(),{
            from: $('#bidacc').val(),
            gas:4000000},
            function (error, result){ 
                if(!error){
                    console.log(result);
                } else{
                    console.log(error);
                }
      }); --}}
      
  });
  
</script>


</body>
</html>

