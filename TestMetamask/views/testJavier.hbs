<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

<link rel="stylesheet" type="text/css" href="main.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">



</head>
<body>
    <div class="container">

<h1>Net</h1>

<div class="col-12">      
  <h4>Debug Start</h4>
  <label for="name" class="col-lg-2 control-label">SOCIAL CONTRACT</label>
  <input id="score">
  <button id="startNET">Debug SocialNet Start</button>
</div>
<h2 id="instructor">User</h2>

<div class="row">
    <div class="column column-33">

      

<div class="col-12"> 
  
  <label>From Account</label>
  <select id="bidAccount" onclick="tocopy()"> </select>
  <input id="bidacc" readonly>

</div>

<div class="col-12">
  <label for="name" class="col-lg-2 control-label"> Name</label>
  <input id="name" type="text">

<label for="name" class="col-lg-2 control-label">Password</label>
  <input id="ipfshash" type="password">

<button id="buttonUser">Create My User</button>

</div>
<div class="col-12">
  
  <label for="name" class="col-lg-2 control-label">Add Friend</label>
  <input id="Friend" type="text">

<button id="buttonFriend">Add</button>

</div>

<h2>Publish</h2>

<div class="col-12">
    <label for="name" class="col-lg-2 control-label">Create message</label>
    <input id="publisher" type="text">
    <label for="name" class="col-lg-2 control-label">Ether Ammount</label>
    <input id="publisherEth" type="text">
<button id="buttonPublish">Publish</button>

  
</div>


<label for="name" class="col-lg-2 control-label">Influence</label>
        
        <input id="Influenceid" type="text">
<button id="buttonInfluence">Influence</button>



<label for="name" class="col-lg-2 control-label">Watch Updates</label>
<button id="buttonUpdate">Refresh Friends</button>
<button id="updatePublished">UpdateContent</button>
<button id="buttonFoFUpdate">RecommendFriends</button>
</div>
<div class="container">
    <div class="row">
        
        <div id="Myfriends"class="col">asdasd
        </div>
        <div id="PublishStory"class="col">asdasd
        </div>
        <div id="Mightknow"class="col">asdasd
        </div>

    </div>
</div>

</div>
<script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>
<script> 
</script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
 
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script>
  var el = function(id){ return document.querySelector(id); };
    {{!-- if (typeof web3 !== 'undefined') --}}
    if (false)
          {
              web3 = new Web3(web3.currentProvider);
          } else {
              // set the provider you want from Web3.providers
              web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));   

          }
    
    web3.eth.defaultAccount = web3.eth.accounts[0];
    accounts =  web3.eth.accounts;
    accounts.forEach(function(address){
          bidAccount.innerHTML += '<option value="' + address + '">'
            + address + '</option>';
    });

    function tocopy(){$('#bidacc').val($('#bidAccount').val()); }


var SocialContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"OwnerIs","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"addressu","type":"address"}],"name":"getlenPublishUser","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"addressu","type":"address"},{"name":"index","type":"uint256"}],"name":"getPublishUser","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"useradd","type":"address"}],"name":"getUserContract","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"useradd","type":"address"},{"name":"publishadd","type":"address"}],"name":"CreatePublish","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"Users","outputs":[{"name":"Useradd","type":"address"},{"name":"counter","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"useradd","type":"address"}],"name":"getUsercount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"debug_gas_sc","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"sc_owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"user","type":"address"},{"name":"contractuser","type":"address"}],"name":"CreateUser","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"addressf","type":"address"}],"name":"AddFriendsS","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":true,"stateMutability":"payable","type":"constructor"}]);  var socialcore;

  $("#startNET").on('click', function (){
   socialcore = SocialContract.new(
    {
      from: $('#bidAccount').val(), 
      data: '0x6080604052336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505a6001819055506109c58061005a6000396000f3006080604052600436106100af576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680631073776f146100b45780631c0d51b71461010b57806348c084df146101625780637e6c75f2146101ef5780639093a9fd1461027257806399b956a0146102d55780639bb1c3991461035f578063e02469f6146103b6578063e18efa28146103e1578063e8611f1b14610438578063ea9624e91461049b575b600080fd5b3480156100c057600080fd5b506100c96104de565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561011757600080fd5b5061014c600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610507565b6040518082815260200191505060405180910390f35b34801561016e57600080fd5b506101ad600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050610556565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156101fb57600080fd5b50610230600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506105da565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561027e57600080fd5b506102d3600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610646565b005b3480156102e157600080fd5b50610316600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506106f0565b604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390f35b34801561036b57600080fd5b506103a0600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610734565b6040518082815260200191505060405180910390f35b3480156103c257600080fd5b506103cb610780565b6040518082815260200191505060405180910390f35b3480156103ed57600080fd5b506103f6610786565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561044457600080fd5b50610499600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506107ab565b005b3480156104a757600080fd5b506104dc600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610830565b005b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6000600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600101805490509050919050565b6000600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600101828154811015156105a757fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905092915050565b6000600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206001018190806001815401808255809150509060018203906000526020600020016000909192909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505050565b60026020528060005260406000206000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060020154905082565b6000600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600201549050919050565b60015481565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b80600260008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050565b600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16636a2c0360826040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050600060405180830381600087803b15801561092d57600080fd5b505af1158015610941573d6000803e3d6000fd5b505050506001600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160008282540192505081905550505600a165627a7a7230582097f1c6266655df07feba124f8113e80131d1c17f96a86249b57f45dd8709d01b0029', 
      gas: '4700000'
    }, function (e, contract){
      console.log(e, contract);
      if (typeof contract.address !== 'undefined') {
          $('#score').val(contract.address);
          console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
      }
  });
  });
  {{!-- var SocialContract = SocialContract.at('0x2b2cf035dab92b90092bcb903fa6ec4109b4d294'); --}}


  $("#buttonFriend").on('click' ,function() {

      socialcore.AddFriendsS.sendTransaction($("#Friend").val(),{
            from: $('#bidacc').val(),
            gas:4000000},function (error, result){ 
                if(!error){
                    console.log(result);
                } else{
                    console.log(error);
                }
        });
              
          });
  
  
  </script>
<script>

var userContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"index","type":"uint256"}],"name":"getUserFriends","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getName","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"addressf","type":"address"}],"name":"AddFriends","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"Friends","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"ishere","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"name1","type":"string"},{"name":"ipfs_hash1","type":"string"},{"name":"Score","type":"address"}],"payable":true,"stateMutability":"payable","type":"constructor"}]);
 $("#buttonUser").on('click' ,function() {
              var user = userContract.new(
                $("#name").val(),
                 $("#ipfshash").val(),
                socialcore.address,
              {
                from: $('#bidacc').val(), 
                data: '0x608060405260405161084238038061084283398101806040528101908080518201929190602001805182019291906020018051906020019092919050505033600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555082600190805190602001906100949291906101b5565b5081600290805190602001906100ab9291906101b5565b5060016000806101000a81548160ff0219169083151502179055508073ffffffffffffffffffffffffffffffffffffffff1663e8611f1b33306040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b15801561019557600080fd5b505af11580156101a9573d6000803e3d6000fd5b5050505050505061025a565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106101f657805160ff1916838001178555610224565b82800160010185558215610224579182015b82811115610223578251825591602001919060010190610208565b5b5090506102319190610235565b5090565b61025791905b8082111561025357600081600090555060010161023b565b5090565b90565b6105d9806102696000396000f300608060405260043610610083576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde03146100885780630a018df01461011857806317d7de7c146101855780636a2c0360146102155780638a1a8bbf146102585780638da5cb5b146102c5578063a050bdd61461031c575b600080fd5b34801561009457600080fd5b5061009d61034b565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156100dd5780820151818401526020810190506100c2565b50505050905090810190601f16801561010a5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561012457600080fd5b50610143600480360381019080803590602001909291905050506103e9565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561019157600080fd5b5061019a61042c565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156101da5780820151818401526020810190506101bf565b50505050905090810190601f1680156102075780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561022157600080fd5b50610256600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506104ce565b005b34801561026457600080fd5b5061028360048036038101908080359060200190929190505050610537565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156102d157600080fd5b506102da610575565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561032857600080fd5b5061033161059b565b604051808215151515815260200191505060405180910390f35b60018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156103e15780601f106103b6576101008083540402835291602001916103e1565b820191906000526020600020905b8154815290600101906020018083116103c457829003601f168201915b505050505081565b60006004828154811015156103fa57fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b606060018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156104c45780601f10610499576101008083540402835291602001916104c4565b820191906000526020600020905b8154815290600101906020018083116104a757829003601f168201915b5050505050905090565b60048190806001815401808255809150509060018203906000526020600020016000909192909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050565b60048181548110151561054657fe5b906000526020600020016000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900460ff16815600a165627a7a72305820de034be733bf994f0a840f7e663dc4eb43b15dc4838faa0004177db28c634d730029', 
                gas: '4700000'
              }, function (e, contract){
                console.log(e, contract);
                if (typeof contract.address !== 'undefined') {
                  console.log(socialcore.address);
                    console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
                }
            })
            
        });
</script>
<script>


</script>

<script>
var publishContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"shares","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"shareEvent","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getBNS","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"UserCollect","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"get_min_inf","outputs":[{"name":"","type":"uint256[2]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"gas_ammount_to_stop","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getIPFS","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"Influencers","outputs":[{"name":"top5","type":"bool"},{"name":"shared","type":"bool"},{"name":"followers","type":"uint256"},{"name":"collected","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"Pammount_","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"BNS","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"Finish","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"collected","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"AuthorStopCollect","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"gas_ammount_to_end","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"EffortPayment","outputs":[{"name":"","type":"uint256[2]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"addressu","type":"address"}],"name":"getContent","outputs":[{"name":"","type":"string"},{"name":"","type":"bool"},{"name":"","type":"bool"},{"name":"","type":"bool"},{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"debug_gas","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"finished","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"ammount_","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"ipfs_content1","type":"string"},{"name":"socialcore","type":"address"}],"payable":true,"stateMutability":"payable","type":"constructor"}]);
 $("#buttonPublish").on('click' ,function() {
    var ipfs_content1 = $('#publisher').val() ;
   
    var publish = publishContract.new(
      ipfs_content1,
      $('#score').val(),
      {
        from: $('#bidacc').val(), 
        data: '0x608060405260405162001ee338038062001ee3833981018060405281019080805182019291906020018051906020019092919050505080600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16631073776f6040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015620000fd57600080fd5b505af115801562000112573d6000803e3d6000fd5b505050506040513d60208110156200012957600080fd5b8101908080519060200190929190505050600460006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555033600b60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555034600a819055505a600f819055508160029080519060200190620001e19291906200035c565b506000600760006101000a81548160ff0219169083151502179055506000600d8190555060006005819055506000600681905550600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639093a9fd600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16306040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b1580156200032957600080fd5b505af11580156200033e573d6000803e3d6000fd5b505050506002600c81620003539190620003e3565b5050506200043a565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200039f57805160ff1916838001178555620003d0565b82800160010185558215620003d0579182015b82811115620003cf578251825591602001919060010190620003b2565b5b509050620003df919062000412565b5090565b8154818355818111156200040d578183600052602060002091820191016200040c919062000412565b5b505050565b6200043791905b808211156200043357600081600090555060010162000419565b5090565b90565b611a99806200044a6000396000f300608060405260043610610112576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806303314efa146101175780630a550245146101425780631a9737af146101595780631fe763831461018457806320d200f51461019b5780632b333acd146101ee5780634efe2d1e14610219578063540a3e27146102a95780636c5eff261461032157806370ff726b1461036257806374a82f69146103cf57806384bcefd4146103e657806385eeb275146104115780638d6d27b3146104285780638da5cb5b14610453578063a8fb07c3146104aa578063b30ab349146104fd578063b857c5b9146105e5578063bef4876b14610610578063c6f5c4f61461063f575b600080fd5b34801561012357600080fd5b5061012c61066a565b6040518082815260200191505060405180910390f35b34801561014e57600080fd5b50610157610670565b005b34801561016557600080fd5b5061016e610b72565b6040518082815260200191505060405180910390f35b34801561019057600080fd5b50610199610b7f565b005b3480156101a757600080fd5b506101b0610e5b565b6040518082600260200280838360005b838110156101db5780820151818401526020810190506101c0565b5050505090500191505060405180910390f35b3480156101fa57600080fd5b50610203611387565b6040518082815260200191505060405180910390f35b34801561022557600080fd5b5061022e61138d565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561026e578082015181840152602081019050610253565b50505050905090810190601f16801561029b5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156102b557600080fd5b506102ea600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061142f565b6040518085151515158152602001841515151581526020018381526020018215151515815260200194505050505060405180910390f35b34801561032d57600080fd5b5061034c60048036038101908080359060200190929190505050611486565b6040518082815260200191505060405180910390f35b34801561036e57600080fd5b5061038d600480360381019080803590602001909291905050506114a0565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156103db57600080fd5b506103e46114de565b005b3480156103f257600080fd5b506103fb611514565b6040518082815260200191505060405180910390f35b34801561041d57600080fd5b5061042661151a565b005b34801561043457600080fd5b5061043d611702565b6040518082815260200191505060405180910390f35b34801561045f57600080fd5b50610468611708565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b3480156104b657600080fd5b506104bf61172e565b6040518082600260200280838360005b838110156104ea5780820151818401526020810190506104cf565b5050505090500191505060405180910390f35b34801561050957600080fd5b5061053e600480360381019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506117c0565b604051808060200186151515158152602001851515151581526020018415151515815260200183151515158152602001828103825287818151815260200191508051906020019080838360005b838110156105a657808201518184015260208101905061058b565b50505050905090810190601f1680156105d35780820380516001836020036101000a031916815260200191505b50965050505050505060405180910390f35b3480156105f157600080fd5b506105fa611979565b6040518082815260200191505060405180910390f35b34801561061c57600080fd5b5061062561197f565b604051808215151515815260200191505060405180910390f35b34801561064b57600080fd5b50610654611992565b6040518082815260200191505060405180910390f35b60005481565b6106786119e6565b60011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160019054906101000a900460ff161515141515156106db57600080fd5b60018060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160016101000a81548160ff02191690831515021790555060016000808282540192505081905550600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639093a9fd33306040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200192505050600060405180830381600087803b15801561083657600080fd5b505af115801561084a573d6000803e3d6000fd5b50505050610856610e5b565b905080600060028110151561086757fe5b6020020151600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639bb1c399336040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15801561092957600080fd5b505af115801561093d573d6000803e3d6000fd5b505050506040513d602081101561095357600080fd5b810190808051906020019092919050505011806109e85750600073ffffffffffffffffffffffffffffffffffffffff16600c82600160028110151561099457fe5b60200201518154811015156109a557fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16145b15610b5a57600060016000600c846001600281101515610a0457fe5b6020020151815481101515610a1557fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160006101000a81548160ff02191690831515021790555033600c826001600281101515610aa657fe5b6020020151815481101515610ab757fe5b9060005260206000200160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060018060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160006101000a81548160ff0219169083151502179055505b6002600054101515610b6f57610b6e6114de565b5b50565b6000600c80549050905090565b60001515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff161515148015610bf5575060011515600760009054906101000a900460ff161515145b1515610c0057600080fd5b3373ffffffffffffffffffffffffffffffffffffffff16600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161415610ce657600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc60086001600281101515610ca257fe5b01549081150290604051600060405180830381858888f19350505050158015610ccf573d6000803e3d6000fd5b506001600d60008282540192505081905550610e0c565b60011515600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160009054906101000a900460ff161515141515610d4857600080fd5b3373ffffffffffffffffffffffffffffffffffffffff166108fc60086000600281101515610d7257fe5b01549081150290604051600060405180830381858888f19350505050158015610d9f573d6000803e3d6000fd5b506001600d6000828254019250508190555060018060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160006101000a81548160ff0219169083151502179055505b6001600c8054905001600d541415610e5957600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b565b610e636119e6565b600080610e6e6119e6565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639bb1c399600c6000815481101515610ebe57fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b158015610f6757600080fd5b505af1158015610f7b573d6000803e3d6000fd5b505050506040513d6020811015610f9157600080fd5b81019080805190602001909291905050509350600090505b600c8054905081101561134a57600073ffffffffffffffffffffffffffffffffffffffff16600c82815481101515610fdd57fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141561105e578382600060028110151561103457fe5b6020020181815250508082600160028110151561104d57fe5b602002018181525050819450611380565b83600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639bb1c399600c848154811015156110ac57fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b15801561115557600080fd5b505af1158015611169573d6000803e3d6000fd5b505050506040513d602081101561117f57600080fd5b810190808051906020019092919050505010806112015750600073ffffffffffffffffffffffffffffffffffffffff16600c828154811015156111be57fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16145b1561133d57600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16639bb1c399600c8381548110151561125357fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001915050602060405180830381600087803b1580156112fc57600080fd5b505af1158015611310573d6000803e3d6000fd5b505050506040513d602081101561132657600080fd5b810190808051906020019092919050505093508092505b8080600101915050610fa9565b8382600060028110151561135a57fe5b6020020181815250508282600160028110151561137357fe5b6020020181815250508194505b5050505090565b60055481565b606060028054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156114255780601f106113fa57610100808354040283529160200191611425565b820191906000526020600020905b81548152906001019060200180831161140857829003601f168201915b5050505050905090565b60016020528060005260406000206000915090508060000160009054906101000a900460ff16908060000160019054906101000a900460ff16908060010154908060020160009054906101000a900460ff16905084565b60088160028110151561149557fe5b016000915090505481565b600c818154811015156114af57fe5b906000526020600020016000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6001600760006101000a81548160ff02191690831515021790555061150161172e565b6008906002611511929190611a08565b50565b600d5481565b6115226119e6565b6000600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561158057600080fd5b61158861172e565b91506000600c80549050111561164b57600190505b600c8054905081101561164a57600c818154811015156115b957fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc83600060028110151561160c57fe5b60200201519081150290604051600060405180830381858888f1935050505015801561163c573d6000803e3d6000fd5b50808060010191505061159d565b5b600460009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc83600160028110151561169657fe5b60200201519081150290604051600060405180830381858888f193505050501580156116c6573d6000803e3d6000fd5b50600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16ff5b60065481565b600b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6117366119e6565b61173e6119e6565b611763611758611751604b600a54611998565b60646119d0565b600c805490506119d0565b81600060028110151561177257fe5b60200201818152505061179d600c8054905082600060028110151561179357fe5b6020020151611998565b600a54038160016002811015156117b057fe5b6020020181815250508091505090565b60606000806000806002600760009054906101000a900460ff16600160008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160009054906101000a900460ff16600160008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000160019054906101000a900460ff16600160008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff16848054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561195f5780601f106119345761010080835404028352916020019161195f565b820191906000526020600020905b81548152906001019060200180831161194257829003601f168201915b505050505094509450945094509450945091939590929450565b600f5481565b600760009054906101000a900460ff1681565b600a5481565b6000808314156119ab57600090506119ca565b81830290508183828115156119bc57fe5b041415156119c657fe5b8090505b92915050565b600081838115156119dd57fe5b04905092915050565b6040805190810160405280600290602082028038833980820191505090505090565b8260028101928215611a37579160200282015b82811115611a36578251825591602001919060010190611a1b565b5b509050611a449190611a48565b5090565b611a6a91905b80821115611a66576000816000905550600101611a4e565b5090565b905600a165627a7a72305820741f8082c756cd4742529ef5f326c712474739a9c937d52ec40ac328c49721630029', 
        gas: '4700000',
        value: web3.toWei($('#publisherEth').val(), 'ether')
      }, function (e, contract){
        console.log(e, contract);
        if (typeof contract.address !== 'undefined') {
          $('#Influenceid').val(contract.address);
            console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
        }
    })
        });


  $('#buttonInfluence').on('click', function (){
      published=publishContract.at($('#Influenceid').val())
      published.shareEvent.sendTransaction({
            from: $('#bidacc').val(),
            gas:4000000},function (error, result){ 
                if(!error){
                    console.log(result);
                } else{
                    console.log(error);
                }
        });
  });




function influence(buttonid){
            console.log('click');
            console.log(buttonid);
            console.log(buttonid.id.substring(3));
                    published=publishContract.at(buttonid.id.substring(3));
                    published.shareEvent.sendTransaction({
                            from: $('#bidacc').val(),
                            gas:4000000},function (error, result){ 
                                if(!error){
                                    $('#'+buttonid.id).attr("disabled", true);
                                    console.log(result);
                                } else{
                                    console.log(error);
                                }
                        });
           
};

function collectable(buttonid){
            console.log('click');
            console.log(buttonid);
            console.log(buttonid.id.substring(3));
                    published=publishContract.at(buttonid.id.substring(3));
                    published.UserCollect.sendTransaction({
                            from: $('#bidacc').val(),
                            gas:4000000},function (error, result){ 
                                if(!error){
                                    $('#'+buttonid.id).attr("disabled", true);
                                    console.log(result);
                                } else{
                                    console.log(error);
                                }
                        });
           
};

var FriendsoF=[];

  $('#buttonFoFUpdate').on('click', function (){

  FriendsoF=[];
   $("#Mightknow").html("");
          Friends.forEach(function(friend){
            socialcore.getUsercount.call(friend.id,
                        function (error1, result1){ 
                        
                            if(!error1){
                                       
                            socialcore.getUserContract.call(friend.id,function (error2, result2){ 
                                    if(!error2){
                                    
                                    for (i=0;i<result1.c[0];i++){

                                        console.log(result2);
                                        userContract.at(result2).getUserFriends.call(i,function (error3,result3){
                                            if(!error3){
                                                console.log('friend address');
                                                console.log(result3);
                                                socialcore.getUserContract.call(result3, function (error4,result4){
                                                    if(!error4){
                                                        console.log('inside');
                                                        console.log(result3);
                                                        userContract.at(result4).getName.call(function (error5,result5){
                                                            if(!error5){
                                                                    var obj = new Object();
                                                                            obj.id = result3;
                                                                            obj.name = result5;
                                                                            FriendsoF.push(obj);
                                                                            $("#Mightknow").html($("#Mightknow").html()+'<div>'+obj.name+'</div><button onclick=Add_Friend()>Add +</button>');

                                                            }else {
                                                                console.log(error5);
                                                            }
                                                        });

                                                        
                                                    }
                                                    else{
                                                        console.log(error4);
                                                    }
                                                });
                                                
                                                console.log(FriendsoF);
                                            }
                                            else{
                                                console.log(error3);
                                            }

                                        });

                                    }
                                        {{!-- console.log(result2); --}}
                                    } else{
                                        {{!-- console.log(error2); --}}
                                    }
                                    });
                                    
                                        console.log(result1);
                            } else{

                                console.log(error1);
                            }
                });

          });

       });

var Friends=[];

  $('#buttonUpdate').on('click', function (){

 Friends=[];
          socialcore.getUsercount.call($('#bidacc').val(),
            function (error1, result1){ 
              
                if(!error1){
                              $("#Myfriends").html("");
                  socialcore.getUserContract.call($('#bidacc').val(),function (error2, result2){ 
                        if(!error2){
                          
                          for (i=0;i<result1.c[0];i++){

                              console.log(result2);
                              userContract.at(result2).getUserFriends.call(i,function (error3,result3){
                                  if(!error3){
                                    console.log('friend address');
                                    console.log(result3);
                                      socialcore.getUserContract.call(result3, function (error4,result4){
                                          if(!error4){
                                              console.log('inside');
                                              console.log(result3);
                                              userContract.at(result4).getName.call(function (error5,result5){
                                                  if(!error5){
                                                           var obj = new Object();
                                                                obj.id = result3;
                                                                obj.name = result5;
                                                                Friends.push(obj);
                                                                $("#Myfriends").html($("#Myfriends").html()+'<div>'+obj.name+'</div>');

                                                  }else {
                                                      console.log(error5);
                                                  }
                                              });

                                            
                                          }
                                          else{
                                              console.log(error4);
                                          }
                                      });
                                    
                                    console.log(Friends);
                                  }
                                  else{
                                    console.log(error3);
                                  }

                              });

                          }
                            {{!-- console.log(result2); --}}
                        } else{
                            {{!-- console.log(error2); --}}
                        }
                        });
                          
                            console.log(result1);
                } else{

                    console.log(error1);
                }
      });
       });


      var publishall=[];
      $('#updatePublished').on('click',function(e,res){
          console.log('clicked');
          publishall=[];
          $("#PublishStory").html("");
          Friends.forEach(function(friend){
              
              socialcore.getlenPublishUser.call(friend.id, function (e,res1){
                  if(!e){
                      console.log(res1.c[0]);
                      for(j=0;j<res1.c[0];j++){
                          socialcore.getPublishUser.call(friend.id,j,function(e2,res2){
                              
                                if(!e2){


                                        publishContract.at(res2).getContent.call($('#bidacc').val(),function(e22,res22){
                                            if(!e22){


      
                                                    obj = new Object()
                                                    obj.fname = friend.name;
                                                    obj.ipfscontent = res22[0];
                                                    obj.collectable = res22[2];
                                                    obj.already_influenced = res22[3];
                                                    obj.alreadycollected = res22[4];
                                                    obj.Ended = res22[1];
                                                    publishall.push(obj);
                                                    string2 =  'id_'+res2.toString();
                                                    console.log(res2);
                                                  
                                                    $("#PublishStory").html($("#PublishStory").html()+'<div>'+obj.fname+'</div>'+'<div>'+obj.ipfscontent+'</div>');
                                                    if(!obj.already_influenced){
                                                             $("#PublishStory").html($("#PublishStory").html()+'<button id='+string2+' onclick="influence('+string2+')">Influence</button>');
                                                    }
                                                    else{ 
                                                        console.log(obj.alreadycollected);
                                                        if(obj.collectable && obj.Ended && !obj.alreadycollected){
                                                             $("#PublishStory").html($("#PublishStory").html()+'<button id='+string2+' onclick="collectable('+string2+')">Collect me!</button>');
                                                        }
                                                    }
             

                                            }   
                                            else{
                                                console.log(e22);
                                            }
                                        });


                                }else{console.log("aca2");console.log(e2);}
                          });
                      }
                  }else{ console.log("aca1");console.log(e);}
              });
             
          }); 
          console.log(publishall);

      });      
 
  
</script>


</body>
</html>

