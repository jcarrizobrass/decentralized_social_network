<html>
  <body>
    <h2>Social Network button test</h2>
    <h3>Browser Example</h3>
    <hr />
    <h4>Get IPFS Hash Data<h4>
    <input type="text" id="lookupHash"/>
    <button id="lookup">Lookup Block</button>
    <button id="lookupStats">Get Stats</button>
    <br /><br />
    <div id="lookupResponse"></div>
    <hr />
    <h4>Add String Data</h4>
    <textarea id="addInputData" placeholder="Hello world!"></textarea>
    <br />
    <button id="addData">Add Data</button>
    <div id="lookupResponse"></div>
    <hr />
    <h4>Add JSON Data</h4>
    <textarea id="addJSONdata" placeholder="Hello world!"></textarea>
    <br />
    <button id="addJSONData">Add JSON Data</button>
    <br /><br />
    <div id="addResponse"></div>
    <div id="lookupResponse"></div>
    <br />
    <br /><br />
    <div id="CreateUser"></div>
    <hr />
    <h4>Create User</h4>
     <h4>Name</h4>
    <textarea id="create_username" placeholder="Insert Name"></textarea><textarea id="create_lastname" placeholder="Insert lastname"></textarea>
    <h4>Email</h4>
    <textarea id="create_email" placeholder="Insert email"></textarea>
    <button id="create_user">Create User</button>


    <script type="text/javascript" src="dist/ipfs-mini.js"></script>
    <script type="text/javascript">
      var el = function(id){ return document.querySelector(id); };
      var ipfs = new IPFS({ host: 'ipfs.infura.io', protocol: 'https' });

      el('#lookup').addEventListener('click', function(){
        var isJSON = false;
        var lookupHash = el('#lookupHash').value;

        ipfs.catJSON(lookupHash, (err, result) => {
          if (err) {
            el('#lookupResponse').innerHTML = 'Hmm.. there was an error: ' + String(err);
          } else {
            el('#lookupResponse').innerHTML = result;
          }
        });
      });



      el('#lookupStats').addEventListener('click', function(){
        var lookupHash = el('#lookupHash').value;

        ipfs.stat(lookupHash, (err, result) => {
          if (err) {
            el('#lookupResponse').innerHTML = 'Hmm.. there was an error: ' + String(err);
          } else {
            el('#lookupResponse').innerHTML = JSON.stringify(result, null, 2);
          }
        });
      });

      el('#addData').addEventListener('click', function(){
        var isJSON = false;
        var inputData = el('#addInputData').value;

        ipfs.add(inputData, (err, result) => {
          if (err) {
            el('#addResponse').innerHTML = 'Hmm.. there was an error: ' + String(err);
          } else {
            el('#addResponse').innerHTML = result;
          }
        });
      });
      el('#addJSONData').addEventListener('click', function(){
        var isJSON = true;
        var inputData = el('#addJSONdata').value;

        ipfs.addJSON(inputData, (err, result) => {
          if (err) {
            el('#addResponse').innerHTML = 'Hmm.. there was an error: ' + String(err);
          } else {
            el('#addResponse').innerHTML = result;
            console.log(result)
          }
        });
      });
// functions to work with solidity

      var eth = new Eth(TestRPC.provider());
      var el = function(id){ return document.querySelector(id); };
      
      // uncomment to enable MetaMask support:
      if (typeof window.web3 !== 'undefined' && typeof window.web3.currentProvider !== 'undefined') {
        eth.setProvider(window.web3.currentProvider);
      } else {
        eth.setProvider(provider); // set to TestRPC if not available
      }
      
      var SocNetInst;

      //shareEvent
      el('#response').innerHTML = 'Share event...';
      SocNetInst.shareEvent(function(err, result){
        if (err) {
          el('#response').innerHTML = 'Hmm, there was an error ' + String(err);
        } else {
          el('#response').innerHTML = 'Sharing event: ' + String(result);
        }
      });

      //UserCollect
      el('#response').innerHTML = 'User collecting payment';
      SocNetInst.shareEvent(function(err, result){
        if (err) {
          el('#response').innerHTML = 'Hmm, there was an error ' + String(err);
        } else {
          el('#response').innerHTML = 'Payment collected: ' + String(result);
        }
      });

      //AddFriendsS
       el('#response').innerHTML = 'Add Friend...';
      SocNetInst.AddFriendsS(el('#friend').value, function(err, result){
        if (err) {
          el('#response').innerHTML = 'Hmm, there was an error ' + String(err);
        } else {
          el('#response').innerHTML = 'Adding friend: ' + String(result);
                    }
      });

       el('#addJSONData').addEventListener('click', function(){
        var isJSON = true;
        var username = el('#create_username').value;
        var lastname = el('#create_lastname').value;
        var email = el('#create_email').value;
        var user = [['username',username],['lastname', lastname],['email',email]];
        //need hashes address and create ipfs directiories
      });
      // hash example
      // user
      /*{"firstName":"", 
      "lastName":"",
      "wallet":"",
      "friends":"",
      "email":"",
      "posts":""}

*/
function CreateUser(columnsResult)
{
    var userData = {};
    columnsResult.forEach(function(column) 
    {
        var columnName = column.metadata.colName;
        jsonData[columnName] = column.value;
    });
    return userData;
 }




    </script>
  </body>
</html>
